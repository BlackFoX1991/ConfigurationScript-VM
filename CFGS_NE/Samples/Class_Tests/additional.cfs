import "CFGS.StandardLibrary.dll";
# Delete-Tests

class Foo {
    var a = [1, 2, 3, 4, 5];
    static var s = [10, 20, 30];

    func testInstance() {
        print("== Foo.testInstance ==");

        print("start a = " + a);

        # Element löschen
        delete a[1];        # entfernt 2  -> [1,3,4,5]
        print("after delete a[1] = " + a);

        # Slice löschen (Range: start~end, end exklusiv)
        delete a[1~3];      # entfernt Indizes 1,2 -> [1,5]
        print("after delete a[1~3] = " + a);

        # Alles löschen
        delete a;           # -> []
        print("after delete a; = " + a);
    }

    static func testStatic() {
        print("== Foo.testStatic ==");

        print("start s = " + s);

        # Element löschen am Index 0
        delete s[0];        # -> [20,30]
        print("after delete s[0] = " + s);

        # Alles löschen
        delete s;
        print("after delete s; = " + s);
    }
}

func testLocalArray() {
    print("== testLocalArray ==");

    var a = [1, 2, 3, 4];
    print("start a = " + a);

    delete a[2];        # -> [1,2,4]
    print("after delete a[2] = " + a);

    delete a[0~2];      # entfernt Index 0,1 -> [4]
    print("after delete a[0~2] = " + a);

    delete a;           # -> []
    print("after delete a; = " + a);
}

func testLocalDict() {
    print("== testLocalDict ==");

    var m = {"a": 1, "b": 2, "c": 3};
    print("start m = " + m);

    delete m["b"];      # Key "b" löschen
    print("after delete m[\"b\"] = " + m);

    delete m;           # alle Einträge löschen -> {}
    print("after delete m; = " + m);
}

func testNestedArrays() {
    print("== testNestedArrays ==");

    var a = [[1,2], [3,4], [5,6]];
    print("start a = " + a);

    # Inneres Element löschen: a[1] = [3,4], daraus Index 0 löschen -> [4]
    delete a[1][0];
    print("after delete a[1][0] = " + a);

    # Jetzt äußeres Element löschen: a[0] löschen
    delete a[0];
    print("after delete a[0] = " + a);

    # Alles löschen
    delete a;
    print("after delete a; = " + a);
}

func main()
{
    var f = new Foo();
    f.testInstance();
    Foo.testStatic();

    testLocalArray();
    testLocalDict();
    testNestedArrays();
}

main();
